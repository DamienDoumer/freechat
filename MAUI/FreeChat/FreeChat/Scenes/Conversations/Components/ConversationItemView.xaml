<?xml version="1.0" encoding="utf-8"?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:FreeChat.Scenes.Conversations.Components"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:DataType="local:ConversationItemViewModel"
             x:Class="FreeChat.Scenes.Conversations.Components.ConversationItemView">
    
    <ContentView.Behaviors>
        <toolkit:TouchBehavior PressedBackgroundColor="LightGray"
                               DefaultBackgroundColor="{StaticResource PrimaryColor}"
                               PressedScale="0.95"
                               Command="{Binding OpenConversationCommand}" />
    </ContentView.Behaviors>

    <Grid ColumnDefinitions="80,*,50"
          RowDefinitions="*,*,1">
        
        <local:SimpleUserProfile Grid.RowSpan="3"
                                 BindingContext="{Binding Peer}"/>
        
        <VerticalStackLayout Grid.Column="1" BackgroundColor="Aqua"
                             Spacing="5">
            <Label FontFamily="QuickSandBold"
                   LineBreakMode="TailTruncation">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="{Binding Peer.FirstName}" />
                        <Span Text=" " />
                        <Span Text="{Binding Peer.LastName}" />
                    </FormattedString>
                </Label.FormattedText>
            </Label>
            
            <Label Text="{Binding LastMessage}"
                   TextColor="{StaticResource SecondaryTextColor}"
                   LineBreakMode="TailTruncation"
                   FontFamily="QuickSandRegular"/>
        </VerticalStackLayout>
        
        <BoxView Height="1"
                 Grid.Row="2"
                 BackgroundColor="LightGray"/>
    </Grid>
    
</ContentView>